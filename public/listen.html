<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Podcast Description">
    <meta name="author" content="Podcast Author">  
    <title>Podcast Site - Episodes</title>
    <link href="css/blog-post.css" rel="stylesheet">
    <link href="css/sticky-footer.css" rel="stylesheet">
    <link href="maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
    <script src="https://unpkg.com/vue"></script>
    <script src="https://cdn.bootcss.com/aplayer/1.6.0/APlayer.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>
    <script
    src="https://code.jquery.com/jquery-3.2.1.min.js"
    integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
    crossorigin="anonymous"></script>
    <script>
              window.playerConfiguration = {
          "options": {
            "theme": "default_dark"
          },          
          "episode": {
            "media": {"mp3": "http://nootnoot.net/files/noot.mp3"},
            "title": "Transcript Test"
          }
        }
    </script>
</head>
<body>
    <div id="app">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <div class="container">
          <a class="navbar-brand" href="#">{{ podcastName }}</a> <button aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler" data-target="#navbarResponsive" data-toggle="collapse" type="button"><span class="navbar-toggler-icon"></span></button>
          <div class="collapse navbar-collapse" id="navbarResponsive">
            <ul class="navbar-nav ml-auto">
              <li class="nav-item">
                <a class="nav-link" href="#">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">Episodes</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">About</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">Subscribe</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
  <div class="container" id="app2">
    <div class="row">
      <!-- Post Content Column -->
      <div class="col-lg-8">
        <!-- Title -->
        <h1 class="mt-4"> {{episodeName}} </h1>
        <hr>
        <!-- Date/Time -->
        <p>Posted on {{episodeDate}}</p>
        <hr>
        <!-- Preview Image -->
        <script class="podigee-podcast-player" src="https://cdn.podigee.com/podcast-player/javascripts/podigee-podcast-player.js" data-configuration="playerConfiguration"></script>
        
        <hr>
        <!-- Post Content -->
        <p class="lead">{{episodeDescription}}</p>
        <hl>
        <p>{{episodeLongDescription}}</p>
        <hr>
        <!-- Comments Form -->
        <div class="card my-4">
          <h5 class="card-header">Leave a Comment:</h5>
          <div class="card-body">
            <form>
              <div class="form-group">
                <textarea class="form-control" rows="3"></textarea>
              </div><button class="btn btn-primary" type="submit">Submit</button>
            </form>
          </div>
        </div><!-- Single Comment -->
        <div class="media mb-4">
          <img alt="" class="d-flex mr-3 rounded-circle" src="http://placehold.it/50x50">
          <div class="media-body">
            <h5 class="mt-0">Commenter Name</h5>Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin. Cras purus odio, vestibulum in vulputate at, tempus viverra turpis. Fusce condimentum nunc ac nisi vulputate fringilla. Donec lacinia congue felis in faucibus.
          </div>
        </div><!-- Comment with nested comments -->
        <div class="media mb-4">
          <img alt="" class="d-flex mr-3 rounded-circle" src="http://placehold.it/50x50">
          <div class="media-body">
            <h5 class="mt-0">Commenter Name</h5>Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin. Cras purus odio, vestibulum in vulputate at, tempus viverra turpis. Fusce condimentum nunc ac nisi vulputate fringilla. Donec lacinia congue felis in faucibus.
            <div class="media mt-4">
              <img alt="" class="d-flex mr-3 rounded-circle" src="http://placehold.it/50x50">
              <div class="media-body">
                <h5 class="mt-0">Commenter Name</h5>Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin. Cras purus odio, vestibulum in vulputate at, tempus viverra turpis. Fusce condimentum nunc ac nisi vulputate fringilla. Donec lacinia congue felis in faucibus.
              </div>
            </div>
            <div class="media mt-4">
              <img alt="" class="d-flex mr-3 rounded-circle" src="http://placehold.it/50x50">
              <div class="media-body">
                <h5 class="mt-0">Commenter Name</h5>Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin. Cras purus odio, vestibulum in vulputate at, tempus viverra turpis. Fusce condimentum nunc ac nisi vulputate fringilla. Donec lacinia congue felis in faucibus.
              </div>
            </div>
          </div>
        </div>
      </div><!-- Sidebar Widgets Column -->
      <div class="col-md-4">
        <!-- Search Widget -->
        <div class="card my-4">
          <h5 class="card-header">Search</h5>
          <div class="card-body">
            <div class="input-group">
              <input class="form-control" placeholder="Search for..." type="text"> <span class="input-group-btn"><button class="btn btn-secondary" type="button"><span class="input-group-btn">Go!</span></button></span>
            </div>
          </div>
        </div><!-- Categories Widget -->
        <div class="card my-4">
          <h5 class="card-header">Categories</h5>
          <div class="card-body">
            <div class="row">
              <div class="col-lg-6">
                <ul class="list-unstyled mb-0">
                  <li>
                    <a href="#">Web Design</a>
                  </li>
                  <li>
                    <a href="#">HTML</a>
                  </li>
                  <li>
                    <a href="#">Freebies</a>
                  </li>
                </ul>
              </div>
              <div class="col-lg-6">
                <ul class="list-unstyled mb-0">
                  <li>
                    <a href="#">JavaScript</a>
                  </li>
                  <li>
                    <a href="#">CSS</a>
                  </li>
                  <li>
                    <a href="#">Tutorials</a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div><!-- Side Widget -->
        <div class="card my-4">
          <h5 class="card-header">Side Widget</h5>
          <div class="card-body">
            You can put anything you want inside of these side widgets. They are easy to use, and feature the new Bootstrap 4 card containers!
          </div>
        </div>
      </div>
    </div><!-- /.row -->
  </div><!-- /.container -->
  <!-- Footer -->
  <footer class="bg-dark footer">
      <div class="container">
        <p class="m-0 text-center text-white">Copyright &copy; {{ podcastAuthor }}</p>
      </div>
    </footer>
  </div>
    <script defer>
      function getParameterByName(name, url) {
          if (!url) url = window.location.href;
          name = name.replace(/[\[\]]/g, "\\$&");
          var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
              results = regex.exec(url);
          if (!results) return null;
          if (!results[2]) return '';
          return decodeURIComponent(results[2].replace(/\+/g, " "));
      }
        $.getJSON( "http://localhost:3000/api/episodeInfo/" + getParameterByName('id'), function( data ) {
          if ( data.length == 0 ) {
              console.log("NO DATA!")
              window.location.replace("404.html");
          } else {
          var postData2 = data
          console.log(postData2)
          var vueApp2 = new Vue({
            el: '#app2',
            data: {
              episodeName : postData2.name,
              episodeDescription: postData2.description,
              episodeLongDescription: postData2.longDescription,
              episodeDate: postData2.date,
              episodeURL: postData2.url
            }
          })
          }
        });

        $.getJSON( "/api/info", function( data ) {
          var postData = data
          console.log(data)
              var vueApp = new Vue({
                el: '#app',
                data: {
                  podcastName: postData.podcastName,
                  podcastDescription: postData.podcastDescription,
                  podcastAuthor: postData.podcastAuthor,
                  subscribeLink: postData.subscribeLink
                }
              })
        });
        </script>
</body>
</html>